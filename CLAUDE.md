# CLAUDE.md - Reginae Sanguine Project

This file provides guidance to Claude Code when working with the Reginae Sanguine project. For module-specific guidance, see the CLAUDE.md files in each module directory.

## Project Overview

**Reginae Sanguine** is a study project implementing a card game engine inspired by Final Fantasy VII Rebirth's "Queen's Blood" minigame. The project uses **Kotlin Multiplatform** with a modular architecture designed for multiple client implementations.

## Project Structure

```
reginae-sanguine/
â”œâ”€â”€ CLAUDE.md             # This file - project overview
â”œâ”€â”€ core/                 # Game engine module
â”‚   â”œâ”€â”€ CLAUDE.md         # Core module documentation
â”‚   â””â”€â”€ src/              # Domain logic and game rules
â”œâ”€â”€ cli/                  # Command-line interface module
â”‚   â”œâ”€â”€ CLAUDE.md         # CLI module documentation
â”‚   â””â”€â”€ src/              # CLI implementation
â””â”€â”€ [future modules]      # Web, Android, Desktop GUI, etc.
```

## Module Division & Responsibilities

### Core Module (`core/`)
**Purpose**: Pure game engine with domain logic  
**Technology**: Kotlin Multiplatform (Common)  
**Responsibilities**:
- Game rules and mechanics implementation
- Board state management and validation
- Card effects and interaction systems
- Win condition evaluation
- Immutable domain model with functional error handling

### CLI Module (`cli/`)
**Purpose**: Command-line interface for human players  
**Technology**: Kotlin Multiplatform (Native)  
**Responsibilities**:
- Text-based user interface
- Command parsing and validation
- Game session management
- Human-readable output formatting

### Future Modules (Planned)
- **Web Server**: Online multiplayer with REST API
- **Android App**: Mobile client application  
- **Desktop GUI**: Native desktop application with graphical interface

## Development Commands

```bash
# Build entire project
./gradlew build

# Run all tests
./gradlew test

# Check code style across all modules
./gradlew ktlintCheck

# Format code across all modules
./gradlew ktlintFormat

# Clean build
./gradlew clean

# Module-specific commands
./gradlew :core:build
./gradlew :cli:build
```

## Architecture Principles

### Domain-Driven Design
- **Core module** contains pure domain logic with no external dependencies
- **Application modules** (CLI, Web, etc.) depend on core but not on each other
- Clear separation between domain and infrastructure concerns

### Functional Programming
- Immutable data structures throughout
- **Result<T>** type for error handling instead of exceptions
- **Arrow-kt** for functional composition and monadic operations

### Kotlin Multiplatform Strategy
- **Common code** in core module for maximum reusability
- **Platform-specific implementations** in application modules
- Consistent API across all platforms and clients

## Code Quality Standards
- **KtLint** enforces official Kotlin code style
- **Comprehensive testing** with Kotest framework
- **GitHub Actions CI** runs full build on every push
- **Domain-specific matchers** for expressive test assertions

## Getting Started
1. **New Features**: Start with core module tests and domain implementation
2. **Client Development**: Depend on core module and implement platform-specific UI
3. **Testing**: Follow existing patterns in each module's test directory
4. **Code Style**: Run `ktlintCheck` before committing

## Commit Message Style
- If Claude participated significantly in implementing current commit:
  - Start commit message with ðŸ¤– followed by a blank space 
  - Add credits at the end: "This commit was implemented by Claude."
  - Do NOT use other credit formats like "Generated with Claude Code" or "Co-Authored-By"
- Otherwise, only add credits at the end: "This commit message was generated by Claude."

For detailed module-specific guidance, refer to:
- [Core Module Documentation](core/CLAUDE.md)
- [CLI Module Documentation](cli/CLAUDE.md)